# Documentation for `patchwork/steps/PRPB`

This documentation covers the files and code found within the `patchwork/steps/PRPB` directory, which includes three Python files: `typed.py`, `__init__.py`, and `PRPB.py`.

## File: `patchwork/steps/PRPB/typed.py`

### Purpose
Defines the input and output structures used by the PRPB step using `TypedDict` from Python's typing system. These structures ensure the required data types and configurations for inputs and outputs in the PRPB process.

### Contents

#### Inputs
- **`PRPBInputs`**: Contains both required and optional fields.
    - **Required Fields**:
        - `modified_files`: List of dictionaries representing files that have been modified.
        - `path_key`: String key for the path.
    - **Optional Fields**:
        - `comment_title_key`: String key for the comment title.
        - `comment_message_key`: String key for the comment message.
        - `disable_branch`: Boolean flag to disable branch creation.
        - `force_branch_creation`: Boolean flag to force branch creation.
        - `branch_prefix`: String representing the branch prefix.
        - `branch_suffix`: String representing the branch suffix.
        - `pr_header`: String for pull request header.
        - `pr_title`: String for pull request title.
        - `force_pr_creation`: Boolean flag to force pull request creation.
        - `disable_pr`: Boolean flag to disable pull request creation.
        - `scm_url`: String for SCM URL.
        - `gitlab_api_key`: String for GitLab API key.
        - `github_api_key`: String for GitHub API key.

#### Outputs
- **`PRPBOutputs`**: Defines the outputs expected from the PRPB step.
    - `base_branch`: Base branch name.
    - `target_branch`: Target branch name.
    - `pr_body`: Body of the pull request.
    - `pr_url`: URL of the created pull request.

### Usage
This module is meant to be imported and used in defining input and output types for the PRPB step, ensuring that the data passed in and generated fits the required structure.

## File: `patchwork/steps/PRPB/__init__.py`

### Purpose
This file is an empty initializer for the `PRPB` module, making this directory a package that can be imported.

### Contents
```python
# This file is intentionally left blank.
```

## File: `patchwork/steps/PRPB/PRPB.py`

### Purpose
Defines the `PRPB` step, which extends the `Step` class. This step processes the inputs, modifies file structures, and manages pull request creation using the `PR` class from the `patchwork.steps` module.

### Contents

#### Class: `PRPB`

##### Constructor (`__init__`)
- **Parameters**:
    - `inputs`: An instance of `PRPBInputs`.
- **Behavior**:
    - Initializes the step with given inputs.
    - Maps input keys to the structure used for modified files.
    - Processes the `modified_files` field and standardizes its structure.

##### Method: `run`
- **Behavior**:
    - Creates an instance of `PR` with the processed inputs.
    - Executes the `run` method of the `PR` instance.
    - Returns the outputs generated by the `PR` step.

### Usage
To use the `PRPB` class, instantiate it with the required inputs and call the `run` method to execute the step and get the outputs.

```python
from patchwork.steps.PRPB import PRPB, PRPBInputs

inputs = PRPBInputs(
    modified_files=[{"path": "file1.py"}],
    path_key='file_path_key',
    # other optional configurations
)
prpb_step = PRPB(inputs)
outputs = prpb_step.run()
print(outputs)
```

This script sets up and runs the PRPB step, displaying the output after execution.