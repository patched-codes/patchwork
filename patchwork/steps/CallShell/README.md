# Documentation for CallShell Module

This module provides functionality to run shell scripts as part of a pipeline step, with support for template rendering and environment configuration. It is designed to be used within a larger framework that automates various processes.

## Structure

- **CallShell.py**: Contains the main class `CallShell`, which is responsible for executing a shell script.
- **typed.py**: Defines the input and output data structures used by `CallShell`.
- **__init__.py**: Empty file to make the directory a Python package.

## CallShell Class

### Description

The `CallShell` class is used to execute shell scripts, allowing the user to provide a template for the script, a working directory, and environment variables. It handles rendering of the script using template values and captures the standard output and error generated by the script execution. 

### Inputs

The `CallShellInputs` class represents the inputs accepted by the `CallShell` class. Inputs include:

1. **script** (`str`): The shell script to be executed. This is a required input.
2. **working_dir** (`str`, optional): The directory in which the shell script should be executed. Defaults to the current working directory if not provided.
3. **env** (`str`, optional): A semicolon-separated string of key-value pairs for environment variables to be set during script execution.
4. **script_template_values** (`dict`, optional): A dictionary of values to be used for rendering dynamic parts of the script.

### Outputs

The `CallShellOutputs` class describes the outputs returned by the `CallShell` class. Outputs include:

1. **stdout_output** (`str`): The standard output of the executed shell script.
2. **stderr_output** (`str`): The standard error output of the executed shell script (only returned internally and logged).

## How To Use

1. **Configure Inputs**: Prepare a dictionary of inputs based on `CallShellInputs`. Ensure the `script` field is provided with the necessary shell commands.
2. **Instantiate CallShell**: Create an instance of `CallShell`, passing the inputs dictionary to the constructor.
3. **Run Script**: Call the `run()` method which executes the script, logs outputs, and returns a dictionary with the `stdout_output`.

## Example

```python
inputs = {
    "script": "echo Hello, World!",
    "working_dir": "/tmp",
    "env": "MY_VAR=value",
    "script_template_values": {}
}
call_shell_step = CallShell(inputs)
output = call_shell_step.run()

print(output["stdout_output"])
```

In the example above, a simple shell command is executed with optional working directory and environment settings. Adjust the `script` and associated parameters according to the specifics of the task you wish to automate.
